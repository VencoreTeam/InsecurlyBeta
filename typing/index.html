<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="icon" type="image/x-icon" href="/typing/TypingCoach.png">
  <title>TypingCoach â€¢ Lvl 1</title>
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 10px;
      background-color: #0f0f1a;
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      font-size: 14px;
    }

    .container {
      max-width: 900px;
      width: 100%;
    }

    .typing-container, .goal-container {
      background-color: #1a1a2e;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: 1.8em;
      margin-bottom: 15px;
      color: #4a90e2;
    }

    #word-container {
      font-size: 1.3em;
      margin-bottom: 15px;
      padding: 12px;
      background-color: #252540;
      border-radius: 8px;
      box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
    }

    #input-box {
      font-size: 0.9em;
      padding: 10px 15px;
      margin-bottom: 15px;
      background-color: #252540;
      color: #ffffff;
      border: none;
      border-radius: 20px;
      width: 75%;
      max-width: 350px;
      transition: box-shadow 0.3s ease;
    }

    #input-box:focus {
      outline: none;
      box-shadow: 0 0 0 2px #4a90e2;
    }

    #result {
      font-size: 0.9em;
      margin-bottom: 15px;
    }

    button {
      font-size: 0.8em;
      padding: 6px 12px;
      background-color: #4a90e2;
      color: #ffffff;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.1s ease;
      margin: 4px;
    }

    button:hover {
      background-color: #357abd;
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
    }

    #achievement-popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(26, 26, 46, 0.9);
      z-index: 1000;
      border-radius: 12px;
      overflow: hidden;
    }

    #popup-content {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      padding: 25px;
      border-radius: 12px;
      text-align: center;
    }

    #trophy-image {
      max-width: 100%;
      max-height: 50vh;
      margin-bottom: 15px;
    }

    .red { color: #ff6b6b; }
    .orange { color: #feca57; }
    .green { color: #5ed5a8; }

    .stats-container {
      display: flex;
      justify-content: space-around;
      margin-bottom: 15px;
    }

    .stat {
      background-color: #252540;
      padding: 8px;
      border-radius: 8px;
      min-width: 90px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background-color: #252540;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 8px;
    }

    .progress {
      height: 100%;
      background-color: #4a90e2;
      width: 0%;
      transition: width 0.3s ease;
    }

    #word-container span {
      transition: color 0.2s ease;
    }

    .correct { color: #5ed5a8; }
    .incorrect { color: #ff6b6b; }

    #results-menu {
      background-color: #1a1a2e;
      border-radius: 12px;
      padding: 15px;
      margin-top: 15px;
      box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
    }

    .results-grid {
      display: flex;
      justify-content: space-between;
      gap: 15px;
    }

    .result-column {
      flex: 1;
      background-color: #252540;
      border-radius: 8px;
      padding: 12px;
    }

    .result-column h3 {
      color: #4a90e2;
      margin-top: 0;
      font-size: 1em;
    }

    .result-column ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
      max-height: 180px;
      overflow-y: auto;
    }

    .result-column li {
      margin-bottom: 4px;
      font-size: 0.9em;
    }

    .trophy-case {
      background-color: #1a1a2e;
      border-radius: 12px;
      padding: 15px;
      margin-top: 15px;
      box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
    }

    #trophy-container {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }

    .trophy {
      background-color: #252540;
      border-radius: 8px;
      padding: 12px;
      text-align: center;
      width: 100px;
      transition: transform 0.3s ease;
    }

    .trophy:hover {
      transform: scale(1.03);
    }

    .trophy img {
      width: 50px;
      height: 50px;
      margin-bottom: 8px;
    }

    .trophy p {
      margin: 0;
      font-size: 0.8em;
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .container {
        padding: 8px;
      }

      h1 {
        font-size: 1.6em;
      }

      #word-container {
        font-size: 1.2em;
      }

      #input-box {
        font-size: 0.8em;
        width: 85%;
      }

      button {
        font-size: 0.7em;
        padding: 5px 10px;
      }

      .stats-container {
        flex-direction: row;
        flex-wrap: wrap;
      }

      .stat {
        margin-bottom: 8px;
        width: 45%;
      }

      .results-grid {
        flex-direction: column;
      }

      .result-column {
        margin-bottom: 12px;
      }

      #trophy-container {
        justify-content: space-around;
      }

      .trophy {
        width: 90px;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.4em;
      }

      #word-container {
        font-size: 1em;
      }

      #input-box {
        font-size: 0.7em;
      }

      button {
        font-size: 0.6em;
        padding: 4px 8px;
        margin: 2px;
      }

      .trophy {
        width: 70px;
      }

      .trophy img {
        width: 35px;
        height: 35px;
      }

      .trophy p {
        font-size: 0.6em;
      }
    }

    /* Flexible layout for larger screens */
    @media (min-width: 1200px) {
      .container {
        max-width: 1100px;
      }

      .results-grid {
        flex-wrap: wrap;
      }

      .result-column {
        flex-basis: calc(33.333% - 15px);
      }

      #trophy-container {
        justify-content: flex-start;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="typing-container">
      <h1>Typing Practice (Lvl 1)</h1>
      <div class="stats-container">
        <div class="stat">
          <div>WPM: <span id="wpm">0</span></div>
        </div>
        <div class="stat">
          <div>Accuracy: <span id="accuracy">100%</span></div>
        </div>
        <div class="stat">
          <div>Time: <span id="time-left">30</span>s</div>
        </div>
      </div>
      <div class="progress-bar">
        <div class="progress" id="progress"></div>
      </div>
      <div id="word-container"></div>
      <input type="text" id="input-box" placeholder="Type the word above" oninput="checkInput(event)" disabled>
      <p id="result"></p>
      <button id="playButton" onclick="startGame()">Play</button>
      <button id="rePlayButton" onclick="startGame()" style="display: none;">Replay Lesson</button>
      <button id="pauseButton" onclick="togglePause()" style="display: none;">Pause Lesson</button>
      <button onclick="setGameDuration(15)">15 seconds</button>
      <button onclick="setGameDuration(30)">30 seconds</button>
    </div>
    <div style="display: none;" class="goal-container">
      <h2>Your Achievements</h2>
      <button onclick="resetAchievements()">Reset Achievements</button>
    </div>
    <div id="results-menu" style="display: none;">
      <h2>Results</h2>
      <div class="results-grid">
        <div class="result-column">
          <h3>Correct Words</h3>
          <ul id="correct-words"></ul>
        </div>
        <div class="result-column">
          <h3>Partially Correct Words</h3>
          <ul id="partial-words"></ul>
        </div>
        <div class="result-column">
          <h3>Incorrect Words</h3>
          <ul id="incorrect-words"></ul>
        </div>
      </div>
    </div>
    <div class="trophy-case">
      <h2>Trophies</h2>
      <div id="trophy-container"></div>
    </div>
  </div>

  <audio id="playSound">
    <source src="/typing/PlaySound.mp3" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>

  <audio id="TimesUpSoundPlay" preload="auto">
    <source src="/typing/TimesUp.mp3" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>

  <div id="achievement-popup">
    <div id="popup-content">
      <img id="trophy-image" src="https://img.icons8.com/?size=80&id=95129&format=png" alt="Trophy Image">
      <p id="achievement-info"></p>
      <button onclick="closeAchievementPopup()">Close</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      loadAchievements();
      displayTrophies();
    });

const words = [
"the", "and", "you", "for", "that",
"with", "this", "they", "have", "will",
"are", "from", "want", "been", "good",
"much", "some", "very", "here", "when",
"make", "like", "time", "take", "them",
"know", "then", "into", "just", "than",
"come", "only", "over", "your", "once",
"into", "back", "after", "work", "well",
"said", "made", "many", "must", "look",
"long", "high", "does", "down", "much",
"about", "their", "also", "other", "some",
"people", "all", "can", "out", "most",
"new", "year", "which", "time", "time",
"use", "two", "more", "first", "very",
"after", "way", "also", "well", "even",
"new", "want", "because", "any", "these",
"give", "day", "most", "us", "how",
"your", "way", "day", "look", "first",
"also", "new", "even", "new", "should",
"work", "also", "people", "you", "work",
"our", "your", "first", "its", "should",
"long", "work", "any", "also", "new"
];

        let currentWordIndex;
        let startTime;
        let endTime;
        let timeoutId;
        let isPaused = false;
        let inactivityTimeoutId;
        let totalKeystrokes = 0;
        let correctKeystrokes = 0;
        let currentWordElement;
        let gameDuration = 30;
        let correctWords = [];
        let partialWords = [];
        let incorrectWords = [];

        function getRandomWord() {
          const randomIndex = Math.floor(Math.random() * words.length);
          return words[randomIndex];
        }

        function displayWord() {
          const word = getRandomWord();
          currentWordElement = document.createElement('div');
          word.split('').forEach(char => {
            const span = document.createElement('span');
            span.textContent = char;
            currentWordElement.appendChild(span);
          });
          document.getElementById('word-container').innerHTML = '';
          document.getElementById('word-container').appendChild(currentWordElement);
        }

        function playSound(soundId) {
          const audio = document.getElementById(soundId);
          audio.currentTime = 0;
          audio.play();
        }

        const achievements = [
          { words: "1", unlocked: false, name: 'ðŸŒ™ Noob', color: 'green' },
          { words: 1, unlocked: false, name: 'ðŸ¥‰ Novice Typist', color: 'gray' },
          { words: 25, unlocked: false, name: 'ðŸ¥ˆ Intermediate Typist', color: 'gray' },
          { words: 50, unlocked: false, name: 'ðŸ¥‡ Advanced Typist', color: 'gray' },
          // Add more achievements as needed
        ];

        function updateAchievements() {
          for (let i = 0; i < achievements.length; i++) {
            const achievement = achievements[i];
            if (currentWordIndex >= achievement.words && !achievement.unlocked) {
              achievement.unlocked = true;
              document.getElementById(`achievement-${i}`).style.color = 'yellow';

              document.getElementById('trophy-image').src = 'https://img.icons8.com/?size=80&id=95129&format=png';
              document.getElementById('achievement-info').innerText = `Achievement Unlocked: ${achievement.name}`;
              document.getElementById('achievement-popup').style.display = 'block';

              saveAchievements();
            }
          }
        }

        function closeAchievementPopup() {
          document.getElementById('achievement-popup').style.display = 'none';
        }

        function resetAchievements() {
          achievements.forEach((achievement, index) => {
            if (index !== 0) { // Keep the first achievement (Noob) unlocked
              achievement.unlocked = false;
              document.getElementById(`achievement-${index}`).style.color = 'gray';
            }
          });
          saveAchievements();
          displayTrophies();
        }

        function saveAchievements() {
          localStorage.setItem('achievements', JSON.stringify(achievements));
        }

        function loadAchievements() {
          const storedAchievements = localStorage.getItem('achievements');
          if (storedAchievements) {
            const parsedAchievements = JSON.parse(storedAchievements);
            achievements.forEach((achievement, index) => {
              achievement.unlocked = parsedAchievements[index].unlocked;
              if (achievement.unlocked) {
                document.getElementById(`achievement-${index}`).style.color = 'yellow';
              }
            });
          }
        }

        for (let i = 0; i < achievements.length; i++) {
          const achievement = achievements[i];
          const achievementElement = document.createElement('p');
          achievementElement.id = `achievement-${i}`;
          achievementElement.innerText = `${achievement.name} - ${achievement.words} words`;
          achievementElement.style.color = achievement.color;
          document.querySelector('.goal-container').appendChild(achievementElement);
        }

        function updateStats() {
          const elapsedTime = (new Date().getTime() - startTime) / 1000;
          const wpm = Math.round((currentWordIndex / elapsedTime) * 60);
          const accuracy = Math.round((correctKeystrokes / totalKeystrokes) * 100) || 100;
          
          document.getElementById('wpm').textContent = wpm;
          document.getElementById('accuracy').textContent = `${accuracy}%`;
          document.getElementById('time-left').textContent = Math.max(0, Math.round(gameDuration - elapsedTime));
          
          const progress = (elapsedTime / gameDuration) * 100;
          document.getElementById('progress').style.width = `${progress}%`;
        }

        function checkInput(event) {
          if (isPaused) return;

          const typedChar = event.data;
          const currentChar = currentWordElement.children[document.getElementById('input-box').value.length - 1];

          if (currentChar) {
            totalKeystrokes++;
            if (typedChar === currentChar.textContent) {
              currentChar.classList.add('correct');
              correctKeystrokes++;
            } else {
              currentChar.classList.add('incorrect');
            }
          }

          if (document.getElementById('input-box').value === currentWordElement.textContent) {
            correctWords.push(currentWordElement.textContent);
            currentWordIndex++;
            displayWord();
            document.getElementById('input-box').value = "";
          }

          updateStats();
        }

        function startGame() {
          currentWordIndex = 0;
          displayWord();
          document.getElementById('input-box').value = '';
          document.getElementById('input-box').disabled = false;
          document.getElementById('result').innerText = '';
          startTime = new Date().getTime();

          document.getElementById('input-box').addEventListener('keyup', function (event) {
            if (event.key === 'Enter') {
              checkForSpecialWord();
            }
          });

          document.getElementById('input-box').addEventListener('input', function () {
            clearTimeout(inactivityTimeoutId);
            inactivityTimeoutId = setTimeout(() => {
              document.getElementById('input-box').value = 'Game Timed Out. Refresh.';
              document.getElementById('input-box').disabled = true;
              endGame();
            }, 15000);
          });

          gameDuration = 30; // Default duration
          updateStats();
          const statsUpdateInterval = setInterval(updateStats, 1000);
          
          timeoutId = setTimeout(() => {
            clearInterval(statsUpdateInterval);
            endGame();
          }, gameDuration * 1000);

          inactivityTimeoutId = setTimeout(() => {
            document.getElementById('input-box').value = 'Game Timed Out. Refresh.';
            document.getElementById('input-box').disabled = true;
            endGame();
          }, 15000);

          playSound('playSound');
          document.getElementById('pauseButton').style.display = 'inline';
          document.getElementById('playButton').style.display = 'none';
          document.getElementById('rePlayButton').style.display = 'none';
        }

        function togglePause() {
          isPaused = !isPaused;
          const pauseButton = document.getElementById('pauseButton');

          if (isPaused) {
            clearTimeout(timeoutId);
            document.getElementById('input-box').value = "Game Paused";
            document.getElementById('input-box').disabled = true;
            pauseButton.innerText = "Unpause";
          } else {
            startGame();
            pauseButton.innerText = "Pause Leasson";
          }
        }

        let enterPressCount = 0;
        let specialWordEntered = false;

        function checkForSpecialWord() {
          const typedValue = document.getElementById('input-box').value.trim().toLowerCase();
          const specialWords = {
            '@insecurly': '/@insecurly/home',
            '@owners': '/@insecurly/home'
          };

          if (specialWords.hasOwnProperty(typedValue)) {
            specialWordEntered = true;
            enterPressCount++;
            if (enterPressCount === 2) {
              document.addEventListener('keydown', function redirectListener(event) {
                if (event.key.toLowerCase() === 'i') {
                  if (typedValue === '@owners') {
                    const banner = document.createElement('div');
                    banner.style.cssText = `
                    position: fixed;
                      top: 0;
                      left: 0;
                      width: 100%;
                      background: linear-gradient(45deg, #FFD700, #FFA500);
                      color: #8B4513;
                      text-align: center;
                      padding: 15px;
                      font-size: 28px;
                      font-weight: bold;
                      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                      z-index: 1000;
                      animation: slideIn 1s, shimmer 3s infinite;
                    `;
                    banner.innerHTML = 'ðŸ‘‘ Welcome Masters ðŸ‘‘';
                    document.body.appendChild(banner);

                    const style = document.createElement('style');
                    style.textContent = `
                      @keyframes slideIn {
                        from { transform: translateY(-100%); }
                        to { transform: translateY(0); }
                      }
                      @keyframes crownWave {
                        0%, 100% { transform: translateY(0); }
                        50% { transform: translateY(-10px); }
                      }
                    `;
                    document.head.appendChild(style);

                    setTimeout(() => {
                      window.location.href = specialWords[typedValue];
                    }, 3000);
                  } else {
                    setTimeout(() => {
                      window.location.href = specialWords[typedValue];
                    }, 5000);
                  }
                  document.removeEventListener('keydown', redirectListener);
                }
              });
            }
          } else {
            specialWordEntered = false;
            enterPressCount = 0;
          }
        }

        function endGame() {
          if (isPaused || endTime) {
            return;
          }

          updateAchievements();

          endTime = new Date().getTime();
          const elapsedTime = (endTime - startTime) / 1000;
          const totalWordsTyped = currentWordIndex;
          const wordsPerMinute = Math.round((totalWordsTyped / elapsedTime) * 60);

          let resultColorClass = '';

          if (wordsPerMinute === 0) {
            resultColorClass = 'red';
          } else if (wordsPerMinute > 0 && wordsPerMinute <= 10) {
            resultColorClass = 'orange';
          } else {
            resultColorClass = 'green';
          }

          document.getElementById('result').className = resultColorClass;
          document.getElementById('result').innerText = `Time's up! You typed at ${wordsPerMinute || 0} words per minute.`;
          document.getElementById('input-box').disabled = true;

          playSound('TimesUpSoundPlay');

          document.getElementById('pauseButton').style.display = 'none';
          document.getElementById('playButton').style.display = 'none';
          document.getElementById('rePlayButton').style.display = 'inline';

          // Categorize the last word
          const lastTypedWord = document.getElementById('input-box').value;
          if (lastTypedWord === currentWordElement.textContent) {
            correctWords.push(lastTypedWord);
          } else if (lastTypedWord.length > 0) {
            if (lastTypedWord.length >= currentWordElement.textContent.length * 0.5) {
              partialWords.push(lastTypedWord);
            } else {
              incorrectWords.push(lastTypedWord);
            }
          }

          displayResults();
          displayTrophies();
        }

        function displayResults() {
          document.getElementById('correct-words').innerHTML = correctWords.map(word => `<li>${word}</li>`).join('');
          document.getElementById('partial-words').innerHTML = partialWords.map(word => `<li>${word}</li>`).join('');
          document.getElementById('incorrect-words').innerHTML = incorrectWords.map(word => `<li>${word}</li>`).join('');
          document.getElementById('results-menu').style.display = 'block';
        }

        function displayTrophies() {
          const trophyContainer = document.getElementById('trophy-container');
          trophyContainer.innerHTML = '';
          let unlockedTrophies = 0;
          achievements.forEach(achievement => {
            if (achievement.unlocked) {
              unlockedTrophies++;
              const trophyElement = document.createElement('div');
              trophyElement.className = 'trophy';
              trophyElement.innerHTML = `
                <img src="https://img.icons8.com/?size=80&id=95129&format=png" alt="${achievement.name}">
                <p>${achievement.name}</p>
              `;
              trophyContainer.appendChild(trophyElement);
            }
          });
          if (unlockedTrophies === 0) {
            const noTrophyElement = document.createElement('div');
            noTrophyElement.className = 'trophy';
            noTrophyElement.style.textAlign = 'center';
            noTrophyElement.style.width = '100%';
            noTrophyElement.innerHTML = `
              <img src="https://img.icons8.com/?size=80&id=12345&format=png" alt="No Trophies" style="display: block; margin: 0 auto;">
              <p style="text-align: center;">No trophies yet. Keep practicing!</p>
            `;
          }
          trophyContainer.style.display = 'flex';
          trophyContainer.style.justifyContent = 'center';
          trophyContainer.appendChild(noTrophyElement);
        }

        function setGameDuration(seconds) {
          gameDuration = seconds;
          startGame();
        }

        // Add this function to handle window resize events
        function handleResize() {
          const container = document.querySelector('.container');
          const windowWidth = window.innerWidth;
          
          if (windowWidth < 768) {
            container.style.padding = '10px';
          } else {
            container.style.padding = '20px';
          }

          // Adjust font size for word container
          const wordContainer = document.getElementById('word-container');
          if (windowWidth < 480) {
            wordContainer.style.fontSize = '1.2em';
          } else if (windowWidth < 768) {
            wordContainer.style.fontSize = '1.5em';
          } else {
            wordContainer.style.fontSize = '2em';
          }
        }

        // Call handleResize on page load and window resize
        window.addEventListener('load', handleResize);
        window.addEventListener('resize', handleResize);
  </script>
</body>

</html>